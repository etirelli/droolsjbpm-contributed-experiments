package org.drools.examples.twittercbr

import twitter4j.Status

global org.drools.examples.twittercbr.model.UIService uiservice

declare Status
    @role( event )
end

rule "Count tweets in 10 seconds"
    duration( 10s )
when
    Number( $count : intValue > 0 ) from accumulate(
        Status() over window:time( 30s ) from entry-point "twitter",
        count(1) )
then
    uiservice.reportTweetCount( drools.getWorkingMemory().getSessionClock().getCurrentTime(), $count );
end

